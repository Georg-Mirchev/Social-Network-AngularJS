<div ng-if="post.totalCommentsCount >= 0" id="comments" ng-controller="CommentsController">
    <a href="" ng-if="post.totalCommentsCount - post.comments.length > 0" ng-hide="isHidden"
       ng-click="showAllComments(post); isHidden = true">
        Show All {{post.totalCommentsCount}} Comments</a>

    <div class="comment" ng-repeat="comment in post.comments | orderBy: 'id'">
        <a ng-controller="HoverController" href="#/users/{{comment.author.username}}"
           hover-intent="hoverBox(comment.author.username)"
           ns-popover ns-popover-template="templates/hoverBox.html"
             ns-popover-trigger="mouseenter" ns-popover-timeout="0.5" ns-popover-placement="bottom">
            <img ng-src="{{comment.author.profileImageData || 'resources/defaultProfilePicture.jpg'}}"/>
            {{comment.author.name}}: </a>
        <div>{{comment.commentContent}}</div>
        <div>{{dateFromNow(comment.date)}}</div>

        <div ng-if="isFriend || post.author.isFriend || post.wallOwner.isFriend">
            <a ng-if="!comment.liked" href="" ng-click="likeComment(post, comment)">Like</a>
            <a ng-if="comment.liked" href="" ng-click="unlikeComment(post, comment)">Unlike</a>
        </div>

        <div>Likes: {{comment.likesCount}}</div>
    </div>

    <div ng-if="isFriend || post.author.isFriend || post.wallOwner.isFriend">
        <form name="addCommentForm" ng-submit="addComment(post, commentData)">
            <textarea id="commentContent" ng-model="commentData.commentContent" minlength="2" required></textarea>
            <button type="submit">Comment</button>
        </form>
    </div>
</div>